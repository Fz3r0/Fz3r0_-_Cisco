# ğŸ§ ğŸ—ï¸ğŸŒ Cisco Nexus: `NX-OS - Tier 3 Fabric PT1 : OSPF Overlay + Essential Configs`

![My Video](https://user-images.githubusercontent.com/94720207/165892585-b830998d-d7c5-43b4-a3ad-f71a07b9077e.gif)

### ğŸ¦ Twitter  : [@fz3r0_OPs](https://twitter.com/Fz3r0_OPs)
### ğŸ± Github  : [Fz3r0](https://github.com/fz3r0) 

---
 
#### Keywords: `Cisco` `CCNA` `CCNP` `Datacenter` `NX-OS` `Cisco Nexus` `Leaf & Spine` `DC Switching` `Modular Chassis` `Fixed Form Factor` `vPC` `ECMP` `FEX` `Fabric Extender` `Nexus 2000` `Nexus 5000` `Nexus 7000` `Nexus 9000`  `Port-Channel` `LAG` `VLAN` `VRF` `Overlay` `Underlay` `EVPN` `VXLAN`  `Spine Switch` `Leaf Switch` `Control Plane` `Forwarding Plane` `Supervisor Card` `Line Card`  `Redundant Power Supply` `Hot-swappable` `In-Service Software Upgrade (ISSU)` `High Availability`  `Twinax Cable` `SFP+` `QSFP28` `QSFP-DD` `10G` `25G` `40G` `100G` `400G`

---

<br>

# ğŸ“„ `Index`



[**ğŸ—ƒï¸ Resources**](https://github.com/Fz3r0/Fz3r0_-_Cisco/blob/main/Cisco_Nexus/Cisco_Nexus_Labs/01-F0-Nexus_DC-CollapsedCore-HA.md#%EF%B8%8F-resources)

# ğŸ—ï¸ Cisco Nexus :: `NX-OS - Tier 3 Fabric PT1 : OSPF Overlay + Essential Configs`



## ğŸ¯ Objectives, Features & Protocols Covered



## ğŸ¥ Lab Proof of Concept (PoC) - Video

- [**ğŸ‘‰ Click here to go to the PoC video ğŸ‘ˆ**](https://youtu.be/RL9hBT0H7UE)

## ğŸ—ºï¸ Network Topology

![image](https://github.com/user-attachments/assets/212482bd-7d5e-4ee7-b61a-a33552973036)








## ğŸ“‹ Network Device Inventory & IP Addressing



## ğŸ“ Lab Notes

Credentials:

- Admin: `admin`
- Pass: `Adm1n.C1sc0`

Notes:

- During Nexus Switches start-up, select `skip` during "Abort Power On Auto Provisioning (yes - continue with normal setup, skip - bypass password and basic configuration, no - continue with Power On Auto Provisioning) (yes/skip/no)[no]: `skip`"
- The NX9-1 and NX9-2 must be powered on and configured before the edge routers, otherwise OSPF process 1 could bug/error.
- Check that all virtual NX devices are powered on and have no CLI issues; sometimes they can hang or freeze when too many sessions are open or multiple processes are running.

# **âš™ï¸ Devices Configurations**

- Copy & Paste the configuration in each device CLI

## ğŸ¥‡ `NX9-BGW-1A` - (Border Gateway - VPC-A)

````py
!##################################################
!#    NEXUS - NX9-BGW-1A                          #
!#    ROL   - BORDER GATEWAY (VPC-A)              #
!#    IP    - 10.10.10.11/24                      #
!#    LOGIN - admin / admin.cisco                 #
!#                                                #
!#    UNDERLAY = OSPF                             #
!#    OSPF 1 / AREA 0                             #
!##################################################

!# NAMINGS, USERS, LICENCES, DISCOVERY

configure terminal
hostname NX9-BGW-1A
username admin password admin.cisco
cdp enable

!# FEATURES

feature ospf
feature lldp
feature ssh
feature telnet
feature lacp
feature vpc

!# PORT CHANNEL FOR VPC (no switchport)

default interface ethernet 1/6-7
interface ethernet 1/6-7
   description ** Port-Channel = vPC Peer-Link --> BGW-1B **
   no shutdown
   no switchport
   speed 1000
   duplex full
   channel-group 1 mode active
exit

#! L3 INTERFACES @ OSPF UNDERLAY

!# Enable OSPF 1 & set RID
router ospf 1
   router-id 10.10.10.11
   log-adjacency-changes
exit

!# Loopback0 = RID
interface loopback 0
   no shutdown
   description ** LOOPBACK0 - ROUTER ID + NVE Source **
   ip address 10.10.10.11/32
exit

#! LINK: BGW-1A --> SPINE-1 
interface ethernet 1/1
   no shutdown
   no switchport
   description ** BGW-1A --> SPINE-1 **
   ip address 10.10.69.1/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: BGW-1A --> SPINE-2
interface ethernet 1/2
   no shutdown
   no switchport
   description ** BGW-1A --> SPINE-2 **
   ip address 10.10.69.3/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

!# PORT CHANNEL FOR vPC DOMAIN & PEER LINK

#! PORT CHANNEL 1
interface port-channel 1
   no shutdown
   no switchport
   description ** Port-Channel = vPC Peer-Link --> BGW-1B **

#! vPC domain + Peer Link config
interface mgmt
   no shutdown
   description ** BGW-1A --> SPINE-2 **
   ip address 10.10.68.1/24
vpc domain 1
   role priority 100                        
   peer-keepalive destination 10.10.68.2 source 10.10.68.1 vrf management
   peer-link port-channel1
   auto-recovery
   system-priority 1000
exit



!# MOTD & CREDITS

banner motd $

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

                         -- Fz3r0 : Nexus Datacenter --

+ DEVICE    =  NX9-BGW-1A
+ IP        =  10.10.10.11

? LOGIN     =  admin / admin.cisco    

* Github : Fz3r0           
* Twitter: @fz3r0_OPs 
* Youtube: @fz3r0_OPs

$


!# SAVE CHECKPOINT & CONFIGURATION

end
checkpoint fz3r0-check-2025-NX9-BGW-1A
copy running-config startup-config

!
!


````


## ğŸ¥‡ `NX9-BGW-1B` - (Border Gateway - VPC-B)

````py
!##################################################
!#    NEXUS - NX9-BGW-1B                          #
!#    ROL   - BORDER GATEWAY (VPC-B)              #
!#    IP    - 10.10.10.12/24                      #
!#    LOGIN - admin / admin.cisco                 #
!#                                                #
!#    UNDERLAY = OSPF                             #
!#    OSPF 1 / AREA 0                             #
!##################################################

!# NAMINGS, USERS, LICENCES, DISCOVERY

configure terminal
hostname NX9-BGW-1B
username admin password admin.cisco
cdp enable

!# FEATURES

feature ospf
feature lldp
feature ssh
feature telnet
feature lacp
feature vpc

!# PORT CHANNEL FOR VPC (no switchport)

default interface ethernet 1/6-7
interface ethernet 1/6-7
   description ** Port-Channel-for-VPC **
   no shutdown
   no switchport
   speed 1000
   duplex full
   channel-group 1 mode active
exit

#! L3 INTERFACES @ OSPF UNDERLAY

!# Enable OSPF 1 & set RID
router ospf 1
   router-id 10.10.10.12
   log-adjacency-changes
exit

!# Loopback0 = RID
interface loopback 0
   no shutdown
   description ** LOOPBACK0 - ROUTER ID + NVE Source **
   ip address 10.10.10.12/32
exit

#! LINK: BGW-1B --> SPINE-2
interface ethernet 1/1
   no shutdown
   no switchport
   description ** BGW-1B --> SPINE-2 **
   ip address 10.10.69.7/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: BGW-1B --> SPINE-1
interface ethernet 1/2
   no shutdown
   no switchport
   description ** BGW-1B --> SPINE-1 **
   ip address 10.10.69.5/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

interface port-channel 1
   no shutdown
   no switchport

!# MOTD & CREDITS

banner motd $

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

                         -- Fz3r0 : Nexus Datacenter --

+ DEVICE    =  NX9-BGW-1B
+ IP        =  10.10.10.12

? LOGIN     =  admin / admin.cisco    

* Github : Fz3r0           
* Twitter: @fz3r0_OPs 
* Youtube: @fz3r0_OPs

$


!# SAVE CHECKPOINT & CONFIGURATION

end
checkpoint fz3r0-check-2025-NX9-BGW-1B
copy running-config startup-config

!
!


````








## ğŸ¥‡ `NX9-SPINE-1` - (SPINE 1)

````py
!##################################################
!#    NEXUS - NX9-SPINE-1                         #
!#    ROL   - SPINE                               #
!#    IP    - 10.10.10.13/24                      #
!#    LOGIN - admin / admin.cisco                 #
!#                                                #
!#    UNDERLAY = OSPF                             #
!#    OSPF 1 / AREA 0                             #
!##################################################

!# NAMINGS, USERS, LICENCES, DISCOVERY

configure terminal
hostname NX9-SPINE-1
username admin password admin.cisco
cdp enable

!# FEATURES

feature ospf
feature lldp
feature ssh
feature telnet

#! L3 INTERFACES @ OSPF UNDERLAY

!# Enable OSPF 1 & set RID
router ospf 1
   router-id 10.10.10.13
   log-adjacency-changes
exit

!# Loopback0 = RID
interface loopback 0
   no shutdown
   description ** LOOPBACK0 - ROUTER ID + NVE Source **
   ip address 10.10.10.13/32
exit

#! LINK: SPINE-1 --> BGW-1A
interface ethernet 1/1
   no shutdown
   no switchport
   description ** SPINE-1 --> BGW-1A **
   ip address 10.10.69.2/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-1 --> BGW-1B
interface ethernet 1/2
   no shutdown
   no switchport
   description ** SPINE-1 --> BGW-1B **
   ip address 10.10.69.6/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-1 --> LEAF-1A
interface ethernet 1/3
   no shutdown
   no switchport
   description ** SPINE-1 --> LEAF-1A **
   ip address 10.10.69.9/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-1 --> LEAF-1B
interface ethernet 1/4
   no shutdown
   no switchport
   description ** SPINE-1 --> LEAF-1B **
   ip address 10.10.69.11/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-1 --> LEAF-2A
interface ethernet 1/5
   no shutdown
   no switchport
   description ** SPINE-1 --> LEAF-2A **
   ip address 10.10.69.13/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-1 --> LEAF-2B
interface ethernet 1/6
   no shutdown
   no switchport
   description ** SPINE-1 --> LEAF-2B **
   ip address 10.10.69.15/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

!# MOTD & CREDITS

banner motd $

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

                         -- Fz3r0 : Nexus Datacenter --

+ DEVICE    =  NX9-SPINE-1
+ IP        =  10.10.10.13

? LOGIN     =  admin / admin.cisco    

* Github : Fz3r0           
* Twitter: @fz3r0_OPs 
* Youtube: @fz3r0_OPs

$


!# SAVE CHECKPOINT & CONFIGURATION

end
checkpoint fz3r0-check-2025-NX9-SPINE-1
copy running-config startup-config

!
!


````









## ğŸ¥‡ `NX9-SPINE-2` - (SPINE 2)

````py
!##################################################
!#    NEXUS - NX9-SPINE-2                         #
!#    ROL   - SPINE                               #
!#    IP    - 10.10.10.14/24                      #
!#    LOGIN - admin / admin.cisco                 #
!#                                                #
!#    UNDERLAY = OSPF                             #
!#    OSPF 1 / AREA 0                             #
!##################################################

!# NAMINGS, USERS, LICENCES, DISCOVERY

configure terminal
hostname NX9-SPINE-2
username admin password admin.cisco
cdp enable

!# FEATURES

feature ospf
feature lldp
feature ssh
feature telnet

#! L3 INTERFACES @ OSPF UNDERLAY

!# Enable OSPF 1 & set RID
router ospf 1
   router-id 10.10.10.14
   log-adjacency-changes
exit

!# Loopback0 = RID
interface loopback 0
   no shutdown
   description ** LOOPBACK0 = ROUTER ID = NVE Source **
   ip address 10.10.10.14/32
exit

#! LINK: SPINE-2 --> BGW-1B
interface ethernet 1/1
   no shutdown
   no switchport
   description ** SPINE-2 --> BGW-1B **
   ip address 10.10.69.8/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-2 --> BGW-1A
interface ethernet 1/2
   no shutdown
   no switchport
   description ** SPINE-2 --> BGW-1A **
   ip address 10.10.69.4/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-2 --> LEAF-1A
interface ethernet 1/3
   no shutdown
   no switchport
   description ** SPINE-2 --> LEAF-1A **
   ip address 10.10.69.17/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-2 --> LEAF-1B
interface ethernet 1/4
   no shutdown
   no switchport
   description ** SPINE-2 --> LEAF-1B **
   ip address 10.10.69.19/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-2 --> LEAF-2A
interface ethernet 1/5
   no shutdown
   no switchport
   description ** SPINE-2 --> LEAF-2A **
   ip address 10.10.69.21/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: SPINE-2 --> LEAF-2B
interface ethernet 1/6
   no shutdown
   no switchport
   description ** SPINE-2 --> LEAF-2B **
   ip address 10.10.69.23/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

!# MOTD & CREDITS

banner motd $

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

                         -- Fz3r0 : Nexus Datacenter --

+ DEVICE    =  NX9-SPINE-2
+ IP        =  10.10.10.14

? LOGIN     =  admin / admin.cisco    

* Github : Fz3r0           
* Twitter: @fz3r0_OPs 
* Youtube: @fz3r0_OPs

$


!# SAVE CHECKPOINT & CONFIGURATION

end
checkpoint fz3r0-check-2025-NX9-SPINE-2
copy running-config startup-config

!
!


````






## ğŸ¥‡ `NX9-LEAF-1A` - (LEAF 1 - VPC-A)

````py
!##################################################
!#    NEXUS - NX9-LEAF-1A                         #
!#    ROL   - LEAF                                #
!#    IP    - 10.10.10.15/24                      #
!#    LOGIN - admin / admin.cisco                 #
!#                                                #
!#    UNDERLAY = OSPF                             #
!#    OSPF 1 / AREA 0                             #
!##################################################

!# NAMINGS, USERS, LICENCES, DISCOVERY

configure terminal
hostname NX9-LEAF-1A
username admin password admin.cisco
cdp enable

!# FEATURES

feature ospf
feature lldp
feature ssh
feature telnet
feature lacp
feature vpc

#! L3 INTERFACES @ OSPF UNDERLAY

!# Enable OSPF 1 & set RID
router ospf 1
   router-id 10.10.10.15
   log-adjacency-changes
exit

!# Loopback0 = RID
interface loopback 0
   no shutdown
   description ** LOOPBACK0 - ROUTER ID + NVE Source **
   ip address 10.10.10.15/32
exit

#! LINK: LEAF-1A --> SPINE-1
interface ethernet 1/1
   no shutdown
   no switchport
   description ** LEAF-1A --> SPINE-1 **
   ip address 10.10.69.10/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: LEAF-1A --> SPINE-2
interface ethernet 1/2
   no shutdown
   no switchport
   description ** LEAF-1A --> SPINE-2 **
   ip address 10.10.69.18/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

!# MOTD & CREDITS

banner motd $

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

                         -- Fz3r0 : Nexus Datacenter --

+ DEVICE    =  NX9-LEAF-1A
+ IP        =  10.10.10.15

? LOGIN     =  admin / admin.cisco    

* Github : Fz3r0           
* Twitter: @fz3r0_OPs 
* Youtube: @fz3r0_OPs

$


!# SAVE CHECKPOINT & CONFIGURATION

end
checkpoint fz3r0-check-2025-NX9-LEAF-1A
copy running-config startup-config

!
!


````





## ğŸ¥‡ `NX9-LEAF-1B` - (LEAF 1 - VPC-B)

````py
!##################################################
!#    NEXUS - NX9-LEAF-1B                         #
!#    ROL   - LEAF                                #
!#    IP    - 10.10.10.16/24                      #
!#    LOGIN - admin / admin.cisco                 #
!#                                                #
!#    UNDERLAY = OSPF                             #
!#    OSPF 1 / AREA 0                             #
!##################################################

!# NAMINGS, USERS, LICENCES, DISCOVERY

configure terminal
hostname NX9-LEAF-1B
username admin password admin.cisco
cdp enable

!# FEATURES

feature ospf
feature lldp
feature ssh
feature telnet
feature lacp
feature vpc

#! L3 INTERFACES @ OSPF UNDERLAY

!# Enable OSPF 1 & set RID
router ospf 1
   router-id 10.10.10.16
   log-adjacency-changes
exit

!# Loopback0 = RID
interface loopback 0
   no shutdown
   description ** LOOPBACK0 - ROUTER ID + NVE Source **
   ip address 10.10.10.16/32
exit

#! LINK: LEAF-1B --> SPINE-1
interface ethernet 1/1
   no shutdown
   no switchport
   description ** LEAF-1B --> SPINE-1 **
   ip address 10.10.69.12/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: LEAF-1B --> SPINE-2
interface ethernet 1/2
   no shutdown
   no switchport
   description ** LEAF-1B --> SPINE-2 **
   ip address 10.10.69.20/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

!# MOTD & CREDITS

banner motd $

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

                         -- Fz3r0 : Nexus Datacenter --

+ DEVICE    =  NX9-LEAF-1B
+ IP        =  10.10.10.16

? LOGIN     =  admin / admin.cisco    

* Github : Fz3r0           
* Twitter: @fz3r0_OPs 
* Youtube: @fz3r0_OPs

$


!# SAVE CHECKPOINT & CONFIGURATION

end
checkpoint fz3r0-check-2025-NX9-LEAF-1B
copy running-config startup-config

!
!


````






## ğŸ¥‡ `NX9-LEAF-2A` - (LEAF 2 - VPC-A)

````py
!##################################################
!#    NEXUS - NX9-LEAF-2A                         #
!#    ROL   - LEAF                                #
!#    IP    - 10.10.10.17/24                      #
!#    LOGIN - admin / admin.cisco                 #
!#                                                #
!#    UNDERLAY = OSPF                             #
!#    OSPF 1 / AREA 0                             #
!##################################################

!# NAMINGS, USERS, LICENCES, DISCOVERY

configure terminal
hostname NX9-LEAF-2A
username admin password admin.cisco
cdp enable

!# FEATURES

feature ospf
feature lldp
feature ssh
feature telnet
feature lacp
feature vpc

#! L3 INTERFACES @ OSPF UNDERLAY

!# Enable OSPF 1 & set RID
router ospf 1
   router-id 10.10.10.17
   log-adjacency-changes
exit

!# Loopback0 = RID
interface loopback 0
   no shutdown
   description ** LOOPBACK0 - ROUTER ID + NVE Source **
   ip address 10.10.10.17/32
exit

#! LINK: LEAF-2A --> SPINE-1
interface ethernet 1/1
   no shutdown
   no switchport
   description ** LEAF-2A --> SPINE-1 **
   ip address 10.10.69.14/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: LEAF-2A --> SPINE-2
interface ethernet 1/2
   no shutdown
   no switchport
   description ** LEAF-2A --> SPINE-2 **
   ip address 10.10.69.22/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

!# MOTD & CREDITS

banner motd $

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

                         -- Fz3r0 : Nexus Datacenter --

+ DEVICE    =  NX9-LEAF-2A
+ IP        =  10.10.10.17

? LOGIN     =  admin / admin.cisco    

* Github : Fz3r0           
* Twitter: @fz3r0_OPs 
* Youtube: @fz3r0_OPs

$


!# SAVE CHECKPOINT & CONFIGURATION

end
checkpoint fz3r0-check-2025-NX9-LEAF-2A
copy running-config startup-config

!
!


````










## ğŸ¥‡ `NX9-LEAF-2B` - (LEAF 2 - VPC-B)

````py
!##################################################
!#    NEXUS - NX9-LEAF-2B                         #
!#    ROL   - LEAF                                #
!#    IP    - 10.10.10.18/24                      #
!#    LOGIN - admin / admin.cisco                 #
!#                                                #
!#    UNDERLAY = OSPF                             #
!#    OSPF 1 / AREA 0                             #
!##################################################

!# NAMINGS, USERS, LICENCES, DISCOVERY

configure terminal
hostname NX9-LEAF-2B
username admin password admin.cisco
cdp enable

!# FEATURES

feature ospf
feature lldp
feature ssh
feature telnet
feature lacp
feature vpc

#! L3 INTERFACES @ OSPF UNDERLAY

!# Enable OSPF 1 & set RID
router ospf 1
   router-id 10.10.10.18
   log-adjacency-changes
exit

!# Loopback0 = RID
interface loopback 0
   no shutdown
   description ** LOOPBACK0 - ROUTER ID + NVE Source **
   ip address 10.10.10.18/32
exit

#! LINK: LEAF-2B --> SPINE-1
interface ethernet 1/1
   no shutdown
   no switchport
   description ** LEAF-2B --> SPINE-1 **
   ip address 10.10.69.16/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

#! LINK: LEAF-2B --> SPINE-2
interface ethernet 1/2
   no shutdown
   no switchport
   description ** LEAF-2B --> SPINE-2 **
   ip address 10.10.69.24/31
   speed 1000
   duplex full
   ip router ospf 1 area 0
   ip ospf network point-to-point
   ip ospf hello-interval 1
   ip ospf dead-interval 4
   cdp enable
exit

!# MOTD & CREDITS

banner motd $

=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

                         -- Fz3r0 : Nexus Datacenter --

+ DEVICE    =  NX9-LEAF-2B
+ IP        =  10.10.10.18

? LOGIN     =  admin / admin.cisco    

* Github : Fz3r0           
* Twitter: @fz3r0_OPs 
* Youtube: @fz3r0_OPs

$


!# SAVE CHECKPOINT & CONFIGURATION

end
checkpoint fz3r0-check-2025-NX9-LEAF-2B
copy running-config startup-config

!
!


````











## ğŸ”€ `vEDGE-1` - (Router 1 - SDWAN Edge) 

````py



````

## ğŸ”€ `vEDGE-2` - (Router 2 - SDWAN Edge) 

````py


````










## ğŸŒ `VPC` - (Internet Circuit)



````py
#! INTERFACE SELECTION:
#!   - mgmt = keep alive link
#!   - ETHs = vPC Peer-Link

#! 1. hABILITAR VPC y LACP (AMBOS SWITCHES)
feature vpc
feature lacp

#! 2. aSIGNAR IP A MGMT INTERFACE y setear en MGMT VRF (Lado A)
interface mgmt
   no shutdown
   description ** BGW-1A --> BGW-1B **
   ip address 10.10.68.1/24
   vrf member management
exit

#! 3. aSIGNAR IP A MGMT INTERFACE y setear en MGMT VRF (Lado B)
interface mgmt
   no shutdown
   description ** BGW-1B --> BGW-1A **
   ip address 10.10.68.2/24
   vrf member management
exit

#! 4. Crear Port Channel y vPC Peer-Link (Lado A)

interface ethernet 1/6-7
   no shutdown
   description ** Channel-Group = vPC Peer-Link --> BGW-1B **
   channel-group 1 mode active
exit

interface port-channel 1
   no shutdown
   description ** Port-Channel = vPC Peer-Link --> BGW-1B **
   switchport
   switchport mode trunk
   vpc peer-link
exit

#! 4. Crear Port Channel y vPC Peer-Link (Lado B)

interface ethernet 1/6-7
   no shutdown
   description ** Channel-Group = vPC Peer-Link --> BGW-1A **
   channel-group 1 mode active
exit

interface port-channel 1
   no shutdown
   description ** Port-Channel = vPC Peer-Link --> BGW-1A **
   switchport
   switchport mode trunk
   vpc peer-link
exit

#! 5. CONFIGURAR KEEP ALIV Y VPC DOMAIN (EG. 1) (Lado A)
vpc domain 1
   !# Mandatory: Keep alive source-destination
   peer-keepalive destination 10.10.68.2 source 10.10.68.1 vrf management
   !# Optional: 
   role priority 100        
   auto-recovery
   system-priority 1000
   peer-link port-channel1
exit

#! 6. CONFIGURAR KEEP ALIV Y VPC DOMAIN (EG. 1) (Lado B)
vpc domain 1
   !# Mandatory: Keep alive source-destination
   peer-keepalive destination 10.10.68.1 source 10.10.68.2 vrf management
   !# Optional: 
   role priority 100        
   auto-recovery
   system-priority 1000
   peer-link port-channel1
exit

# Help copmands

show vpc peer-keepalive

ping 10.10.69.1 vrf management

````




#! vPC domain + Peer Link config
interface mgmt
   no shutdown
   description ** BGW-1A --> SPINE-2 **
   ip address 10.10.68.1/24
vpc domain 1
   role priority 100                        
   peer-keepalive destination 10.10.68.2 source 10.10.68.1 vrf management
   peer-link port-channel1
   auto-recovery
   system-priority 1000
exit










# ğŸ—ƒï¸ Resources

- https://www.youtube.com/watch?v=fWCH39T-_fU

---

<span align="center"> <p align="center"> ![giphy](https://user-images.githubusercontent.com/94720207/166587250-292d9a9f-e590-4c25-a678-d457e2268e85.gif) </p> </span> 

&nbsp;

<span align="center"> <p align="center"> _I hope this information was useful for someone_ </p> </span> 
<span align="center"> <p align="center"> _and please, don't forget to enjoy your days..._ </p> </span> 
<span align="center"> <p align="center"> _...It is getting dark... so dark..._ </p> </span> 

&nbsp;

<span align="center"> <p align="center"> _In the mist of the night you could see me come, where shadows move and Demons lie..._ </p> </span> 
<span align="center"> <p align="center"> _I am [Fz3r0 ğŸ’€](https://github.com/Fz3r0/) and the Sun no longer rises..._ </p> </span> 

---

---

> ![hecho en mexico 5](https://user-images.githubusercontent.com/94720207/166068790-fa1f243d-2db9-4810-a6e4-eb3c4ad23700.png)
>
> _- Hecho en MÃ©xico - by [Fz3r0 ğŸ’€](https://github.com/Fz3r0/)_  
>
> _"In the mist of the night you could see me come, where shadows move and Demons lie..."_ 
